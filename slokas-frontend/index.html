<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fuzzy Search</title>
    <style>
        .result {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>
<body>

<h1>Fuzzy Search</h1>
<label for="query">Enter Query:</label>
<input type="text" id="query" name="query">
<button onclick="performFuzzySearch()">Search</button>

<div id="results-container"></div>

<script>
    function performFuzzySearch() {
        // Get the query from the input field
        const query = document.getElementById('query').value;

        // Fetch data from the API
        fetch(`http://127.0.0.1:5000/api/ramayanam/slokas/fuzzy-search?query=${query}`)
            .then(response => response.json())
            .then(results => {
                // Display search results
                displayResults(results);
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });
    }

    function displayResults(results) {
        const resultsContainer = document.getElementById('results-container');

        // Clear previous results
        resultsContainer.innerHTML = '';

        if (results.length === 0) {
            resultsContainer.innerHTML = '<p>No results found.</p>';
        } else {
            // Display each result
            results.forEach(result => {
                const resultElement = document.createElement('div');
                resultElement.classList.add('result');
                resultElement.innerHTML = `
                    <p>Sloka Number: ${result.sloka_number}</p>
                    <p>Ratio: ${result.ratio}</p>
                    <p>Sloka: ${result.sloka}</p>
                    <p>Meaning: ${result.meaning}</p>
                    <p>Translation: ${result.translation}</p>
                `;
                resultsContainer.appendChild(resultElement);
            });
        }
    }
</script>

</body>
</html>
